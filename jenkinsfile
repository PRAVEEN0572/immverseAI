pipeline {
    agent any

    stages {
        stage('build and tag docker image') {
            steps {
              script{
            withDockerRegistry(credentialsId: 'Docker-cred', toolName: 'docker') {
            sh 'docker build -t praveen0572/node:latest'
          }
        }
            }
        }    
        stage('push docker image') {
            steps{
                script{
            withDockerRegistry(credentialsId: 'Docker-cred', toolName: 'docker') {
            sh 'docker push praveen0572/node:latest'
          }
        }
            }
        }    
    }
}
